	EXPORT DRAW_LARGE_NUMBER
	IMPORT DRAW_RECTANGLE_FILLED
	AREA MYCODE, CODE, READONLY

DRAW_TEXT
	; R0 - dx
	; R1 - dy
	; R9 - table address
	; R10 - colour

    PUSH {R0-R12, LR}
	
    MOV R5, R0         ; base x
    MOV R6, R1         ; base y
    MOV R11, #0X1FF

DRAW_LOOP
    LDR R7, [R9], #4   ; Load packed start (x0 y0)
    LDR R8, [R9], #4   ; Load packed end (x1, y1)
    CMP R7, #0         ; Check if end of table
    BEQ END_DRAW

    MOV R0, R7, LSR #9 ; Extract x0
    AND R0, R0, R11 ; Mask lower 9 bits
    MOV R1, R7         ; Extract y0
    AND R1, R1, R11 ; Mask lower 9 bits

    MOV R3, R8, LSR #9 ; Extract x1
    AND R3, R3, R11 ; Mask lower 9 bits
    MOV R4, R8         ; Extract y1
    AND R4, R4, R11 ; Mask lower 9 bits

    ; x0 - R0, y0 - R1, x1 - R3, y1 - R4

    ADD R0, R5, R0
    ADD R1, R6, R1
    ADD R3, R5, R3
    ADD R4, R6, R4

    BL DRAW_RECTANGLE_FILLED
    B DRAW_LOOP

END_DRAW
    POP {R0-R12, PC}


DRAW_LARGE_NUMBER FUNCTION
	; Draws ASCII character in R2 starting from the top left corner x, y:
	; R0: x
	; R1: y
	; R2: ASCII character
	; R10: color
	PUSH {R0-R12, LR}

	LDR R9, =ZERO_LARGE_TABLE
	CMP R2, #48
	BEQ GO_DRAW
	
	LDR R9, =ONE_LARGE_TABLE
	CMP R2, #49
	BEQ GO_DRAW
	
	LDR R9, =TWO_LARGE_TABLE
	CMP R2, #50
	BEQ GO_DRAW
	
	LDR R9, =THREE_LARGE_TABLE
	CMP R2, #51
	BEQ GO_DRAW
	
	LDR R9, =FOUR_LARGE_TABLE
	CMP R2, #52
	BEQ GO_DRAW
	
	LDR R9, =FIVE_LARGE_TABLE
	CMP R2, #53
	BEQ GO_DRAW
	
	LDR R9, =SIX_LARGE_TABLE
	CMP R2, #54
	BEQ GO_DRAW
	
	LDR R9, =SEVEN_LARGE_TABLE
	CMP R2, #55
	BEQ GO_DRAW
	
	LDR R9, =EIGHT_LARGE_TABLE
	CMP R2, #56
	BEQ GO_DRAW
	
	LDR R9, =NINE_LARGE_TABLE
	CMP R2, #57
	BEQ GO_DRAW

GO_DRAW
	BL DRAW_TEXT
	POP {R0-R12, PC}
	ENDFUNC
	
	LTORG

ZERO_LARGE_TABLE
	DCDU 2611, 8771, 3116, 8778, 3624, 8782, 4133, 8785, 4642, 8787, 5153, 8789, 5663, 8790, 6174, 8792, 6685, 8793, 7196, 8794, 7707, 8794, 8218, 8795, 8729, 9263, 8774, 9308, 9241, 9771, 9291, 9820, 9752, 10280, 9805, 10333, 10264, 10790, 10319, 10845, 10776, 11301, 10810, 19004, 10833, 11357, 11287, 12323, 11318, 18495, 11346, 11870, 11829, 17985, 11859, 12894, 12311, 12834, 12340, 17474, 12823, 18977, 12884, 19038, 13363, 16962, 13890, 16451, 16929, 25122, 17491, 19038, 17954, 25123, 17983, 18496, 18002, 19038, 18467, 25636, 18487, 19007, 18513, 19038, 18968, 20517, 19024, 20573, 19493, 25639, 19534, 20573, 20007, 26153, 20044, 20573, 20505, 21036, 20553, 21596, 21018, 22066, 21060, 21596, 21554, 22107, 22043, 22618, 22556, 23129, 23069, 23640, 23582, 24151, 24096, 24662, 24612, 25172, 25124, 25682, 25638, 26192, 26153, 26701, 26670, 27208, 0

ONE_LARGE_TABLE
	DCDU 4179, 26717, 4637, 5672, 5660, 7207, 7195, 8742, 8730, 10277, 10265, 11812, 11288, 11812, 11800, 18467, 12835, 18525, 0

TWO_LARGE_TABLE
	DCDU 2592, 10275, 3103, 9252, 3614, 8741, 3665, 11869, 4125, 8230, 4176, 11869, 4636, 7719, 5159, 7208, 5199, 11869, 5659, 6697, 6170, 6697, 6222, 11869, 6682, 7208, 6733, 11869, 7193, 7719, 7705, 8230, 7756, 11869, 8217, 8741, 8267, 11869, 8728, 9252, 9240, 10275, 9290, 11869, 9801, 11869, 10263, 11810, 10824, 11869, 11335, 11869, 11799, 18977, 11846, 12882, 11859, 27229, 12357, 12882, 12869, 13393, 13380, 14416, 13891, 14416, 14402, 14927, 14913, 15438, 15423, 16461, 15934, 16461, 16445, 16972, 16929, 24610, 16956, 17483, 17466, 17994, 17954, 25123, 17976, 18505, 18467, 25124, 18486, 19016, 18968, 20518, 18996, 19527, 19494, 25640, 19504, 20038, 20008, 20549, 20505, 21060, 21017, 21571, 21530, 22081, 22043, 22592, 22556, 23103, 23069, 23613, 23582, 24123, 24095, 24633, 24612, 25142, 25125, 25650, 0

THREE_LARGE_TABLE
	DCDU 3103, 11810, 3614, 10787, 3670, 21084, 4125, 9764, 4178, 5725, 4644, 8741, 5148, 8230, 5659, 7719, 5715, 7773, 6183, 6696, 6682, 7719, 6749, 18014, 7193, 7719, 7705, 8230, 7764, 12382, 8217, 8741, 8728, 9764, 8758, 18490, 9274, 22077, 9752, 10787, 10263, 10787, 10301, 24126, 10775, 11810, 11317, 18494, 11799, 19489, 12373, 18014, 12884, 18014, 13364, 18494, 14899, 18495, 15922, 18495, 16447, 25152, 16467, 18014, 16945, 18496, 17441, 25122, 17490, 18014, 17968, 18497, 18002, 20061, 18466, 25635, 18479, 20023, 18488, 20034, 18513, 20061, 18979, 25636, 18989, 20023, 19010, 25667, 19024, 20061, 19480, 21031, 19499, 20023, 19523, 26180, 19535, 20061, 20007, 21046, 20025, 21062, 20045, 21084, 20550, 21084, 21017, 22069, 21054, 22107, 22042, 22580, 22075, 22618, 22554, 23091, 22587, 23129, 23067, 23602, 23100, 23641, 23580, 24113, 23614, 24152, 24093, 24623, 24126, 24663, 24607, 25134, 24640, 25173, 25124, 25643, 25153, 25684, 25668, 26193, 0

FOUR_LARGE_TABLE
	DCDU 1612, 28238, 2119, 28238, 2625, 8782, 3132, 8782, 3639, 8782, 4146, 8782, 4653, 8782, 5160, 8782, 5667, 8782, 6173, 8782, 6683, 8782, 8731, 9279, 8773, 28238, 9243, 9786, 9755, 10293, 10267, 10800, 10779, 11307, 11291, 11814, 11803, 12321, 18968, 25181, 0

FIVE_LARGE_TABLE
	DCDU 3145, 8783, 3663, 9811, 4179, 12373, 4693, 25686, 5167, 8765, 5206, 25176, 5656, 8765, 5720, 24665, 6745, 24154, 7258, 23131, 8283, 22620, 8728, 9788, 8779, 9308, 9308, 21597, 9752, 10811, 9808, 10333, 10321, 10845, 10776, 11322, 10834, 11358, 11288, 25633, 11313, 13370, 11357, 20062, 11824, 13370, 12372, 20062, 13360, 20537, 16441, 26170, 17978, 26683, 18003, 20062, 19003, 26684, 19026, 20062, 20028, 26685, 20049, 21597, 20529, 22079, 20559, 21597, 21055, 27201, 21069, 21597, 21569, 27716, 21577, 22620, 22066, 22620, 22578, 23131, 23091, 23642, 23604, 24154, 24117, 24665, 24630, 25176, 25143, 25686, 25656, 26197, 26173, 26707, 26685, 27217, 27204, 27725, 0

SIX_LARGE_TABLE
	DCDU 3126, 8782, 3634, 8786, 4142, 8788, 4652, 8790, 5162, 8791, 5672, 8792, 6182, 8793, 6693, 8794, 7203, 8795, 7714, 8796, 8225, 8796, 8736, 9284, 8778, 9308, 9248, 9780, 9273, 9793, 9294, 9821, 9759, 10289, 9783, 10303, 9807, 10333, 10270, 10799, 10294, 10814, 10321, 10845, 10781, 11309, 10805, 11837, 10834, 11870, 11293, 11819, 11316, 11837, 11804, 12330, 11827, 12348, 11859, 12894, 12316, 12841, 12339, 14395, 12827, 13352, 12850, 14395, 12884, 19550, 13339, 14375, 13850, 14375, 13873, 14395, 14362, 14886, 14385, 21562, 14874, 15909, 15385, 15909, 15897, 17444, 15920, 19514, 16920, 17444, 16954, 26683, 17432, 18979, 18003, 19550, 18968, 21026, 19003, 26684, 19026, 19550, 19479, 21026, 19516, 27197, 19537, 21085, 20029, 27198, 20048, 21085, 20542, 27199, 20559, 21085, 21015, 24609, 21055, 27201, 21069, 22108, 21554, 23108, 21577, 22108, 22084, 23131, 23091, 23642, 23604, 24153, 24117, 24664, 24607, 25121, 24630, 25175, 25143, 25686, 25656, 26197, 26177, 26707, 26689, 27216, 27200, 27724, 0

SEVEN_LARGE_TABLE
	DCDU 2584, 8241, 8216, 27682, 10843, 16989, 11352, 16989, 11861, 16989, 12370, 16989, 12879, 16989, 13388, 16989, 13897, 16989, 14406, 16989, 14916, 16989, 15425, 16989, 15934, 16989, 16443, 16989, 16952, 17500, 17461, 18009, 17970, 18518, 18479, 19027, 18988, 19536, 19497, 20046, 20007, 20555, 20516, 21064, 21026, 21573, 21538, 22082, 22050, 22591, 22562, 23100, 23074, 23609, 23586, 24118, 24098, 24627, 24610, 25137, 25122, 25646, 25634, 26155, 26146, 26664, 26658, 27173, 27672, 28191, 28184, 28700, 28696, 29209, 0

EIGHT_LARGE_TABLE
	DCDU 2630, 8270, 3138, 8274, 3620, 9261, 3648, 8276, 4129, 9264, 4159, 8278, 4639, 9265, 4670, 8279, 5149, 9267, 5181, 8280, 5660, 9268, 5692, 8281, 6171, 9269, 6203, 8282, 6746, 23643, 7194, 9270, 7226, 8283, 7705, 9271, 7771, 22620, 8249, 8776, 8267, 8796, 8728, 9271, 8761, 9284, 8782, 9309, 9240, 9769, 9260, 9784, 9273, 9795, 9296, 9821, 9752, 10278, 9775, 10305, 9809, 10333, 10263, 10788, 10288, 10816, 10322, 10846, 10775, 11299, 10801, 11328, 10835, 11870, 11287, 12322, 11314, 12351, 11860, 20062, 12311, 19489, 12338, 12862, 12851, 20542, 17458, 20543, 17953, 25634, 18003, 20062, 18466, 26147, 18481, 20543, 19007, 26176, 19026, 20062, 19480, 21029, 19504, 20545, 20005, 26150, 20014, 20546, 20049, 21597, 20518, 21048, 20537, 22083, 20559, 21597, 21017, 22071, 21059, 27205, 21069, 21597, 21573, 22620, 22042, 23094, 22074, 22620, 22586, 23131, 23067, 23605, 23099, 23643, 23580, 24116, 23611, 24154, 24093, 24627, 24124, 24665, 24606, 25138, 24637, 25176, 25120, 25649, 25150, 25687, 25635, 26159, 25664, 26197, 26177, 26708, 26693, 27217, 0

NINE_LARGE_TABLE
	DCDU 2601, 8244, 3109, 8248, 3618, 8251, 4129, 8253, 4639, 8254, 5150, 8255, 5661, 8256, 5716, 10846, 6172, 8257, 6683, 8258, 7194, 8258, 7746, 17475, 8217, 8749, 8240, 8771, 8729, 9256, 8756, 9284, 9240, 9766, 9270, 9796, 9299, 10846, 9752, 10277, 9783, 10308, 10264, 10788, 10296, 10820, 10775, 11299, 10809, 11845, 10835, 13405, 11287, 12322, 11834, 13381, 11858, 13405, 12311, 19489, 13371, 14405, 13393, 14940, 14395, 16452, 14416, 14940, 14928, 16475, 15439, 16475, 15930, 16452, 15950, 16475, 16442, 17475, 16462, 17498, 16973, 17498, 17441, 26146, 17466, 18498, 17484, 18521, 17977, 18498, 17995, 18521, 18466, 26147, 18489, 19009, 18506, 19544, 19000, 19520, 19016, 19544, 19480, 21540, 19511, 20031, 19526, 20055, 20004, 26661, 20022, 20542, 20036, 20566, 20517, 26663, 20532, 27196, 20545, 21589, 21031, 27178, 21041, 21589, 21529, 22100, 22041, 22611, 22554, 23122, 23067, 23632, 23580, 24143, 24092, 24653, 24606, 25164, 25119, 25674, 25635, 26183, 26147, 26692, 26666, 27199, 0

	
	END